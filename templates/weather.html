<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Thá»i tiáº¿t SÃ i GÃ²n</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body class="portrait">
  <header class="topbar">
    <div class="brand">ğŸŒ¤ Thá»i tiáº¿t SÃ i GÃ²n</div>
    <div class="datetime" id="clock">--:--:--</div>
  </header>

  <main class="main-center">

    <!-- CURRENT WEATHER -->
    <section class="card main-card">
      <div class="city">{{ data.current.name }}</div>
      <div class="desc">{{ data.current.weather[0].description | capitalize }}</div>
      <div class="temp">{{ data.current.main.temp }}Â°C</div>
      <div class="feels">Cáº£m giÃ¡c nhÆ°: {{ data.current.main.feels_like }}Â°</div>
    </section>

    <!-- INFO GRID -->
    <section class="info-grid">
      <div class="info-card"><div>ğŸ’¨ GiÃ³</div><strong>{{ data.current.wind.speed }} m/s</strong></div>
      <div class="info-card"><div>ğŸ’§ Äá»™ áº©m</div><strong>{{ data.current.main.humidity }}%</strong></div>
      <div class="info-card"><div>ğŸŒ¡ Ãp suáº¥t</div><strong>{{ data.current.main.pressure }} hPa</strong></div>
      <div class="info-card"><div>ğŸŒ… BÃ¬nh minh</div><strong>{{ data.current.sys.sunrise | datetimeformat }}</strong></div>
      <div class="info-card"><div>ğŸŒ‡ HoÃ ng hÃ´n</div><strong>{{ data.current.sys.sunset | datetimeformat }}</strong></div>
      <div class="info-card"><div>ğŸ‘ï¸ Táº§m nhÃ¬n</div><strong>{{ (data.current.visibility/1000) }} km</strong></div>
    </section>

    <!-- FORECAST -->
    <section class="card forecast-card-wrap">
      <h3>ğŸ—“ Dá»± bÃ¡o 6 ngÃ y</h3>

      <div class="forecast-grid">
        {% for f in data.forecast_daily %}
        <div class="forecast-card small">
          <div class="fc-date">{{ f.date }}</div>
          <img src="https://openweathermap.org/img/wn/{{ f.icon }}@2x.png" />
          <div class="fc-desc">{{ f.description }}</div>
          <div class="fc-temp">{{ f.temp_max }}Â° / {{ f.temp_min }}Â°</div>
        </div>
        {% endfor %}
      </div>
    </section>

  </main>

<script>
function updateClock(){
  const now = new Date();
  const opts = {
    timeZone: 'Asia/Ho_Chi_Minh',
    hour12:false,
    year:'numeric',month:'2-digit',day:'2-digit',
    hour:'2-digit',minute:'2-digit',second:'2-digit'
  };
  document.getElementById('clock').textContent =
    new Intl.DateTimeFormat('vi-VN', opts).format(now);
}
updateClock();
setInterval(updateClock,1000);

// Auto-switch pages
const pages = ['/weather','/news','/market','/finance'];
let idx = pages.indexOf(window.location.pathname);
if(idx===-1) idx = 0;
setInterval(()=>{
  idx = (idx+1)%pages.length;
  window.location.href = pages[idx];
}, 120000);
</script>
</body>
</html>
