<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Thá»i tiáº¿t SÃ i GÃ²n</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body {
      background-color: #0f172a;
      color: #fff;
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    header.topbar {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.6rem 1rem;
      background-color: #1e293b;
      font-weight: bold;
      color: #facc15;
      font-size: 1.1rem;
      box-sizing: border-box;
    }

    .weather-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex: 1;
      width: 100%;
      padding: 1.5rem;
      box-sizing: border-box;
      text-align: center;
    }

    .current-weather {
      background: #1e293b;
      border-radius: 12px;
      padding: 1.5rem;
      width: 90%;
      max-width: 800px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
      margin-bottom: 1.5rem;
    }

    .temp {
      font-size: 5rem;
      font-weight: 700;
      margin: 0.3rem 0;
    }

    .details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 0.8rem;
      margin-top: 1rem;
    }

    .details div {
      background: #0f172a;
      border-radius: 8px;
      padding: 0.6rem;
      font-size: 0.9rem;
      line-height: 1.3;
    }

    h3 {
      margin: 1rem 0 0.6rem;
      font-size: 1.3rem;
      color: #facc15;
    }

    .forecast-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 1rem;
      width: 90%;
      max-width: 800px;
      justify-content: center;
    }

    .forecast-card {
      background: #1e293b;
      border-radius: 10px;
      padding: 0.8rem;
      text-align: center;
      box-shadow: 0 0 8px rgba(0,0,0,0.25);
      transition: transform 0.2s ease;
    }

    .forecast-card:hover {
      transform: scale(1.05);
    }

    .forecast-card img {
      width: 60px;
      height: 60px;
    }

    @media (orientation: landscape) {
      .temp { font-size: 4rem; }
      .forecast-grid {
        grid-template-columns: repeat(5, 1fr);
      }
    }
  </style>
</head>

<body class="slide-page">
  <header class="topbar">
    <div class="brand">ğŸŒ¤ Thá»i tiáº¿t SÃ i GÃ²n</div>
    <div class="datetime" id="clock">--:--:--</div>
  </header>

  <div class="weather-container">
    <div class="current-weather">
      <h2>{{ data["name"] }}</h2>
      <p>{{ data["weather"][0]["description"] | capitalize }}</p>
      <h1 class="temp">{{ data["main"]["temp"] }}Â°C</h1>
      <p>Cáº£m giÃ¡c nhÆ°: {{ data["main"]["feels_like"] }}Â°</p>

      <div class="details">
        <div>ğŸŒ… BÃ¬nh minh<br>{{ data["sys"]["sunrise"] | datetimeformat }}</div>
        <div>ğŸŒ‡ HoÃ ng hÃ´n<br>{{ data["sys"]["sunset"] | datetimeformat }}</div>
        <div>ğŸ’¨ GiÃ³<br>{{ data["wind"]["speed"] }} m/s</div>
        <div>ğŸ’§ Äá»™ áº©m<br>{{ data["main"]["humidity"] }}%</div>
        <div>ğŸŒ¡ Ãp suáº¥t<br>{{ data["main"]["pressure"] }} hPa</div>
        <div>ğŸ‘â€ğŸ—¨ Táº§m nhÃ¬n<br>{{ data["visibility"]/1000 }} km</div>
      </div>
    </div>

    <h3>Dá»± bÃ¡o 7 ngÃ y tá»›i</h3>
    <div class="forecast-grid">
      {% for day in fc["daily"][:7] %}
      <div class="forecast-card">
        <div>{{ day.dt | datetimeformat("%d-%m") }}</div>
        <img src="http://openweathermap.org/img/wn/{{ day.weather[0].icon }}@2x.png">
        <div>{{ day.weather[0].description }}</div>
        <div>{{ day.temp.max }}Â° / {{ day.temp.min }}Â°</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <script>
    // ğŸ” Auto chuyá»ƒn trang sau 2 phÃºt
    const pages = ["/weather", "/gold", "/crypto", "/stock", "/news", "/finance"];
    let idx = pages.indexOf(window.location.pathname);
    if (idx === -1) idx = 0;
    setInterval(() => {
      idx = (idx + 1) % pages.length;
      window.location.href = pages[idx];
    }, 120000);

    // ğŸŒ™ Hiá»‡u á»©ng slide khi rá»i trang
    document.body.classList.add("slide-page");
    document.body.style.transition = "transform 0.7s ease-in-out, opacity 0.7s ease-in-out";
    document.body.style.transform = "translateX(0)";
    document.body.style.opacity = "1";
    window.addEventListener("beforeunload", () => {
      document.body.style.transform = "translateX(-50px)";
      document.body.style.opacity = "0";
    });

    // ğŸ•’ Äá»“ng há»“ realtime
    function updateClock() {
      const now = new Date();
      const opts = { timeZone: 'Asia/Ho_Chi_Minh', hour12: false,
                    year: 'numeric', month: '2-digit', day: '2-digit',
                    hour: '2-digit', minute: '2-digit', second: '2-digit' };
      const clock = document.getElementById('clock');
      if (clock) clock.textContent = new Intl.DateTimeFormat('vi-VN', opts).format(now);
    }
    updateClock();
    setInterval(updateClock, 1000);

    /* ======= Preload weather icons ======= */
    (function preloadImages() {
      const imgs = [
        "http://openweathermap.org/img/wn/01d@2x.png",
        "http://openweathermap.org/img/wn/02d@2x.png",
        "http://openweathermap.org/img/wn/03d@2x.png",
        "http://openweathermap.org/img/wn/04d@2x.png",
        "http://openweathermap.org/img/wn/09d@2x.png",
        "http://openweathermap.org/img/wn/10d@2x.png",
        "/static/img/weather/clear.png",
        "/static/img/weather/cloud.png",
        "/static/img/weather/rain.png"
      ];
      imgs.forEach(url => { const i = new Image(); i.src = url; });
    })();
  </script>
</body>
</html>
