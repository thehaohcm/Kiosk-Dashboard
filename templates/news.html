<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Tin tá»©c má»›i nháº¥t</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body class="portrait">
  <header class="topbar">
    <div class="brand">ðŸ“° VnExpress</div>
    <div class="datetime" id="clock">--:--:--</div>
  </header>

  <main class="main-center">
    <section class="card">
      <h3>Tin má»›i nháº¥t (VnExpress)</h3>
      <div id="skeleton" class="skeleton-list">
        {% for i in range(6) %}<div class="skeleton-item"><div class="skeleton-title shimmer"></div><div class="skeleton-line shimmer"></div></div>{% endfor %}
      </div>
      <ul id="news-list" class="news-list" style="display:none;"></ul>
    </section>
  </main>

<script>
async function loadNews(){
  const sk=document.getElementById('skeleton'), list=document.getElementById('news-list');
  sk.style.display='block'; list.style.display='none';
  try{
    const res=await fetch('/news_json'); const items=await res.json();
    list.innerHTML='';
    items.forEach(i=>{
      const li=document.createElement('li');
      li.innerHTML=`<a href="${i.link}" target="_blank">${i.title}</a><div class="time">${i.pubDate}</div>`;
      list.appendChild(li);
    });
  }catch(e){ list.innerHTML=`<li>Lá»—i táº£i tin: ${e}</li>`; }
  finally{ sk.style.display='none'; list.style.display='block'; }
}
loadNews();

function updateClock(){const now=new Date();const opts={timeZone:'Asia/Ho_Chi_Minh',hour12:false,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit'};document.getElementById('clock').textContent=new Intl.DateTimeFormat('vi-VN',opts).format(now);}updateClock();setInterval(updateClock,1000);
</script>
</body>
</html>